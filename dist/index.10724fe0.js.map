{"mappings":"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","sources":["dragdrop.js"],"sourcesContent":["\"use strict\";\nclass DragDrop {\n    constructor(container) {\n        this.container = container;\n        this.target = null;\n        this.initialPosition = {\n            x: null,\n            y: null\n        };\n        this.order = [];\n        this.items = this.holders;\n    }\n    makeHolders() {\n        let items = this.items;\n        for (let i = 0; i < items.length; i++) {\n            let holder = document.createElement(\"div\");\n            holder.className = \"holder\";\n            let { top, left, width, height } = DragDrop.utils.getBoundingClientRect(items[i]);\n            let containerBox = DragDrop.utils.getBoundingClientRect(this.container);\n            holder.style.backgroundColor = \"rgba(0,0,0,.04)\";\n            holder.style.margin = getComputedStyle(items[i]).margin;\n            holder.style.width = width + \"px\";\n            holder.style.height = height + \"px\";\n            holder.style.top = `translate(${left - containerBox.x}px,${top - containerBox.y}px)`;\n            this.container.appendChild(holder);\n        }\n        this.holders = this.container.querySelectorAll(\".holder\");\n    }\n    removeHolders() {\n        let holders = this.container.querySelectorAll(\".holder\");\n        for (let i = 0; i < holders.length; i++) {\n            let holder = holders[i];\n            holder.remove();\n        }\n    }\n    setItems() {\n        this.removeHolders();\n        let childrens = this.container.children;\n        for (let i = 0; i < childrens.length; i++) {\n            let children = childrens[i];\n            children.classList.add(\"item\");\n            children.style.position = \"absolute\";\n            children.style.transition = \"transform 0s\";\n        }\n        this.items = this.container.querySelectorAll(\".item\");\n        this.makeHolders();\n        let items = this.items;\n        let holders = this.holders;\n        for (let i = 0; i < items.length; i++) {\n            let item = items[i];\n            item.setAttribute(\"data-ddid\", i);\n            let holder = holders[i];\n            let holderBoxY = DragDrop.utils.getBoundingClientRect(holder, \"y\");\n            let containerBoxY = DragDrop.utils.getBoundingClientRect(this.container, \"y\");\n            item.style.transform = `translateY(${holderBoxY - containerBoxY}px)`;\n            setTimeout(() => {\n                item.style.transition = `transform 0.15s ease-in`;\n            });\n            this.order.push(i);\n        }\n    }\n    updateItems() {\n        let items = this.items;\n        let holders = this.holders;\n        for (let i = 0; i < items.length; i++) {\n            let item = items[i];\n            let index = Number(item.getAttribute(\"data-ddid\"));\n            if (this.target == index)\n                continue;\n            let holder = holders[this.order.indexOf(index)];\n            let holderBoxY = DragDrop.utils.getBoundingClientRect(holder, \"y\");\n            let containerBoxY = DragDrop.utils.getBoundingClientRect(this.container, \"y\");\n            item.style.transform = `translateY(${holderBoxY - containerBoxY}px)`;\n        }\n    }\n    firstContact(event) {\n        let eventTarget = event.target;\n        let target = eventTarget.getAttribute(\"data-ddid\");\n        if (target == null || !eventTarget.classList.contains(\"item\"))\n            return;\n        let item = this.items[target];\n        item.style.transition = \"transform 0s\";\n        this.target = Number(target);\n        let { pageX, pageY } = event;\n        this.initialPosition = {\n            x: pageX,\n            y: pageY\n        };\n    }\n    dragging(event) {\n        if (this.target == null)\n            return;\n        let currentPosition = {\n            x: event.pageX,\n            y: event.pageY\n        };\n        let holder = this.holders[this.order.indexOf(this.target)];\n        let holderBoxY = DragDrop.utils.getBoundingClientRect(holder, \"y\");\n        this.items[this.target].style.transform = `translate(${currentPosition.x - this.initialPosition.x}px,${(holderBoxY - DragDrop.utils.getBoundingClientRect(this.container, \"y\")) + currentPosition.y - this.initialPosition.y}px)`;\n        this.collission(holder);\n    }\n    collission(current) {\n        let currentBoxY = DragDrop.utils.getBoundingClientRect(current, \"y\");\n        let holders = this.holders;\n        for (let i = 0; i < holders.length; i++) {\n            let holder = holders[i];\n            if (current == holder)\n                continue;\n            let holderBox = DragDrop.utils.getBoundingClientRect(holder);\n            let item = this.items[this.target];\n            let itemBox = DragDrop.utils.getBoundingClientRect(item);\n            if (Math.abs((holderBox.y + holderBox.height / 2) - (itemBox.y + itemBox.height / 2)) <= itemBox.height / 2) {\n                this.order = DragDrop.utils.insertAt(this.order, this.target, i);\n                this.initialPosition.y = (this.initialPosition.y - currentBoxY) + DragDrop.utils.getBoundingClientRect(holders[this.order.indexOf(this.target)], \"y\");\n                this.updateItems();\n            }\n        }\n    }\n    releaseContact() {\n        if (this.target == null)\n            return;\n        let item = this.items[this.target];\n        item.style.transition = `transform 0.15s ease-in`;\n        item.style.opacity = 1;\n        this.target = null;\n        this.updateItems();\n    }\n    init() {\n        this.order = [];\n        this.container.style.display = \"flex\";\n        this.container.style.flexDirection = \"column\";\n        this.container.style.position = \"relative\";\n        this.setItems();\n        const handleFirstContact = (event) => {\n            this.firstContact(event);\n        };\n        const handleDragging = (event) => {\n            this.dragging(event);\n        };\n        const handleReleaseContact = () => this.releaseContact();\n        this.container.removeEventListener(\"mousedown\", handleFirstContact);\n        this.container.removeEventListener(\"mousemove\", handleDragging);\n        window.removeEventListener(\"mouseup\", handleReleaseContact);\n        this.container.addEventListener(\"mousedown\", handleFirstContact);\n        this.container.addEventListener(\"mousemove\", handleDragging);\n        window.addEventListener(\"mouseup\", handleReleaseContact);\n    }\n}\nDragDrop.utils = {\n    insertAt: function (array, target, to) {\n        let initial_index = array.indexOf(target);\n        if (initial_index < to) {\n            return array.slice(0, initial_index).concat(array.slice(initial_index + 1, to + 1)).concat([target]).concat(array.slice(to + 1, array.length));\n        }\n        else if (initial_index > to) {\n            return array.slice(0, to).concat([target]).concat(array.slice(to, initial_index)).concat(array.slice(initial_index + 1, array.length));\n        }\n    },\n    getBoundingClientRect: function (target, ...properties) {\n        let rect = target.getBoundingClientRect();\n        if (properties.length == 1) {\n            return rect[properties[0]];\n        }\n        else if (!properties || properties.length == 0)\n            return rect;\n        let result = {};\n        for (let i = 0; i < properties.length; i++) {\n            let property = properties[i];\n            result[property] = rect[property];\n        }\n        return result;\n    }\n};\n"],"names":[],"version":3,"file":"index.10724fe0.js.map","sourceRoot":"/__parcel_source_root/"}